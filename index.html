<!DOCTYPE html>
<html>
  <head>
    <title>Compass Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
	<script type="text/javascript" src="jQueryRotate.2.2.js"></script>
    
    <script type="text/javascript" charset="utf-8">

    // The watch id references the current `watchHeading`
    var watchID = null;

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    //
    function onDeviceReady() {
        startWatch();
    }

    // Start watching the compass
    //
    function startWatch() {

        // Update compass every 3 seconds
        var options = { frequency: 30 };

        watchID = navigator.compass.watchHeading(onSuccess, onError, options);
    }


    // onSuccess: Get the current heading
    //
    function onSuccess(heading) {
        var element = document.getElementById('heading');
        element.innerHTML = 'Heading: ' + heading.magneticHeading;
		$("#igla").rotate(heading.magneticHeading);

    }

    // onError: Failed to get the heading
    //
    function onError() {
        alert('onError!');
    }

    </script>
      <style>
#kompas {
	background-image:url(compass.png);
	background-repeat:no-repeat;
	width:310px;
	height:310px;
	margin:10px auto;
}
</style>
  </head>
  <body>
    <div id="heading">Waiting for heading...</div>
<div id="kompas">
<div id="igla"><img src="needle.png" /></div>
</div>
  </body>
</html>